# GAR to PostgreSQL
## Скрипт для загрузки и обновления данных ФИАС в формате ГАР

* * *
### Системные требования
1. Скрипт создавался и тестировался на Ubuntu. На Windows тестов не проводилось.
2. Python 3.8
3. Pip
    sudo apt install python3-pip
### Порядок действий при первичном импорте ГАР.

#### 0. Загрузить с [сайта ФНС](https://fias.nalog.ru/Updates):
1. архив с актуальной версией ГАР ([прямая ссылка](http://fias.nalog.ru/Public/Downloads/Actual/gar_xml.zip)).
2. XSD схемы выгрузки БД ([прямая ссылка](https://fias.nalog.ru/docs/gar_schemas.zip)).

#### 1. Разархивировать скачанные архивы
XSD схемы и XML файлы должны быть распакованы в разные директории.
Для удобства таблицы в архиве разбиты на директории по субъектам РФ.
Скрипт импортирует в БД таблицы, относящиеся \*\*только к одному\*\* субъекту,
поэтому в директорию для XML файлов должны быть извлечены:
1. папка, соответствующая номеру импортируемого субъекта РФ
2. все файлы, находящиеся в архиве без директорий, "сверху"

#### 2. 